# TBMQ

[![Slack](https://img.shields.io/badge/Slack-TBMQ-1F8B4D?logo=slack)](https://join.slack.com/t/tbmq/shared_invite/zt-31kk3315e-5jtPw8YAKskq1KkUqTrTyQ)
[![TBMQ Builds Server Status](https://img.shields.io/teamcity/build/e/TBMQ_Build?label=TB%20builds%20server&server=https%3A%2F%2Fbuilds.thingsboard.io&logo=data:image/png;base64,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&labelColor=305680)](https://builds.thingsboard.io/viewType.html?buildTypeId=TBMQ_Build&guest=1)
[![Docker Pulls](https://img.shields.io/docker/pulls/thingsboard/tbmq-node?label=Docker%20Pulls&style=flat&color=4C92F7)](https://hub.docker.com/r/thingsboard/tbmq-node)

![banner](https://github.com/user-attachments/assets/3584b592-33dd-4fb4-91d4-47b62b34806c)

<div align="center">
 
# Scalable, fault-tolerant, and durable messaging for millions of MQTT clients.

</div>
<br>
<div align="center">
 
üí° [Get started](https://thingsboard.io/docs/mqtt-broker/getting-started/)&ensp;‚Ä¢&ensp;üåê [Website](https://thingsboard.io/products/mqtt-broker/)&ensp;‚Ä¢&ensp;üìö [Documentation](https://thingsboard.io/docs/mqtt-broker/)&ensp;‚Ä¢&ensp;üìî [Blog](https://thingsboard.io/blog/)&ensp;‚Ä¢&ensp;üï∏Ô∏è [Slack](https://join.slack.com/t/tbmq/shared_invite/zt-31kk3315e-5jtPw8YAKskq1KkUqTrTyQ)&ensp;‚Ä¢&ensp;üîó [LinkedIn](https://www.linkedin.com/company/thingsboard/posts/?feedView=all)

</div>

TBMQ is fully compliant with the MQTT v3.1, v3.1.1 and v5.0 protocols, delivering complete support for all core MQTT features across both single-node and clustered environments. Whether you‚Äôre building scalable IoT solutions or ensuring reliable communication for connected devices, TBMQ meets the latest standards for seamless interoperability.

## üöÄ Installation options
TBMQ offers flexible installation options tailored for both development and large-scale production environments:

* [Docker](https://thingsboard.io/docs/mqtt-broker/install/cluster/docker-compose-setup/).
* Kubernetes (K8s) using [AWS](https://thingsboard.io/docs/mqtt-broker/install/cluster/aws-cluster-setup/), [Azure](https://thingsboard.io/docs/mqtt-broker/install/cluster/azure-cluster-setup/), [GCP](https://thingsboard.io/docs/mqtt-broker/install/cluster/gcp-cluster-setup/).
* [Helm Chart](https://thingsboard.io/docs/mqtt-broker/install/cluster/helm-cluster-setup-options/).

‚û°Ô∏è **[View all installation options and guides ‚ûú](https://thingsboard.io/docs/mqtt-broker/install/installation-options/)**

## üí° Getting started with TBMQ

Check out our [Getting Started guide](https://thingsboard.io/docs/mqtt-broker/getting-started/) to learn the basics of TBMQ. In minutes, you will learn to:

* **Connect** MQTT clients to TBMQ.
* **Configure** authentication and authorization.
* **Publish** messages.
* **Subscribe** to topics.

## üíä Common IoT usage scenarios for TBMQ

At ThingsBoard, we've gained a lot of experience in building scalable IoT applications, which has helped us identify three main scenarios for MQTT-based solutions. 

### 1. Fan-in (telemetry ingestion)
Numerous devices generate a large volume of messages that are consumed by specific applications. Normally, a few applications are set up to handle these lots of incoming data. It must be ensured that they do not miss any single message.
<p align="center">
  <img src="https://github.com/user-attachments/assets/bbc92bcf-c09b-4141-b71d-d5e469ceeec2" 
       alt="Diagram showing fan-in communication pattern" 
       width="600">
</p>

### 2. Fan-out (broadcast messaging)
Numerous devices subscribing to specific updates or notifications that must be delivered. This leads to a few incoming requests that cause a high volume of outgoing data.
<p align="center">
  <img src="https://github.com/user-attachments/assets/85fe89da-ae81-4bef-8d50-c0c21e60b60f" 
       alt="Diagram showing fan-out communication pattern" 
       width="600">
</p>

### 3. Point-to-point (command & control)
Messages are routed between a single publisher and a specific subscriber through uniquely defined topics. Pattern that is primarily used for one-to-one communication. Ideal for private messaging or command-based interactions.
<p align="center">
  <img src="https://github.com/user-attachments/assets/88ce216d-891a-4232-9b4a-8590ded2cdfc" 
       alt="Diagram showing p2p communication pattern" 
       width="600"
       style="margin-left: 10px;">
</p>

Acknowledging these scenarios, we intentionally designed TBMQ to be exceptionally well-suited for all three.

## ‚ú® Features

<table>
  <tr>
    <td width="50%" valign="top">
      <br>
      <div align="center">
        <img src="https://placehold.co/378x200/EFEFEF/222222?text=Extreme+Scalability" alt="Extreme Scalability" width="378" />
        <h3>Extreme Scalability & <br> Performance</h3>
      </div>
      <div align="center">
        <p>Built for massive IoT loads. TBMQ can handle over **4M+ concurrent connections** on a single node and **100M+** in cluster mode, delivering a throughput of **3M+ messages/sec** with consistently low latency.</p>
      </div>
      <br>
      <div align="center">
        <a href="https://thingsboard.io/products/mqtt-broker/">Read more ‚ûú</a>
      </div>
      <br>
    </td>
    <td width="50%" valign="top">
      <br>
      <div align="center">
        <img src="https://placehold.co/378x200/EFEFEF/222222?text=Fault+Tolerance" alt="Fault Tolerance" width="378" />
        <h3>Fault Tolerance & <br> High Availability</h3>
      </div>
      <div align="center">
        <p>Ensure zero downtime with a masterless, horizontally scalable cluster architecture. TBMQ utilizes <b>Kafka</b> for persistent storage and <b>Redis</b> for caching, ensuring high data durability and no single point of failure.</p>
      </div>
      <br>
      <div align="center">
        <a href="https://thingsboard.io/docs/mqtt-broker/architecture/">Read more ‚ûú</a>
      </div>
      <br>
    </td>
  </tr>
  <tr>
    <td width="50%" valign="top">
      <br>
      <div align="center">
        <img src="https://placehold.co/378x200/EFEFEF/222222?text=MQTT+5.0+%26+Security" alt="MQTT 5.0 Compliance" width="378" />
        <h3>Full MQTT 5.0 <br> & Security</h3>
      </div>
      <div align="center">
        <p>Full compliance with <b>MQTT v3.1, v3.1.1, and v5.0</b> specifications. Features include QoS 0/1/2, Retained Messages, and Shared Subscriptions. Secures data via TLS/SSL and supports Basic, X.509, and OAuth2 authentication.</p>
      </div>
      <br>
      <div align="center">
        <a href="https://thingsboard.io/docs/mqtt-broker/user-guide/mqtt-client-type/">Read more ‚ûú</a>
      </div>
      <br>
    </td>
    <td width="50%" valign="top">
      <br>
      <div align="center">
        <img src="https://placehold.co/378x200/EFEFEF/222222?text=Seamless+Integration" alt="Seamless Integration" width="378" />
        <h3>Seamless Data <br> Integration</h3>
      </div>
      <div align="center">
        <p>Don't just route data‚Äîprocess it. Use the dedicated <b>Integration Executor</b> to forward MQTT streams to external systems like Kafka, HTTP endpoints, or other brokers without blocking the main processing loop.</p>
      </div>
      <br>
      <div align="center">
        <a href="https://thingsboard.io/docs/mqtt-broker/integration-architecture/">Read more ‚ûú</a>
      </div>
      <br>
    </td>
  </tr>
</table>

## Supported features:

- All MQTT v3.x features
- All MQTT v5.0 features
- Multi-node cluster support
- X.509 certificate chain authentication support
- JWT authentication
- Access control (ACL) based on client ID, username, or X.509 certificate chain
- REST query support for clients‚Äô sessions and subscriptions
- Rate limits of message processing
- Cluster and clients' metrics monitoring
- Unauthorized clients
- MQTT WebSocket client
- Integrations with external systems (HTTP, MQTT, Kafka)
- Kafka topics and consumer groups monitoring
- Proxy protocol
- Blocked clients
- MQTT channel backpressure support

## ‚öôÔ∏è Cloud-Native Architecture

TBMQ is designed as a microservices-based solution (in cluster mode) or a monolithic application (in standalone mode) to fit any infrastructure requirement.

* **Persistence:** All messages are persisted in Kafka to ensure data is never lost, even during processing spikes.
* **State Management:** Client sessions and subscriptions are managed via Redis for sub-millisecond access.
* **Scalability:** Nodes can be added or removed dynamically without service interruption.

![TBMQ Sessions](https://img.thingsboard.io/mqtt-broker/architecture/tbmq-architecture.png)

<div align="center">
<a href="https://thingsboard.io/docs/mqtt-broker/architecture/"><b>Explore the Architecture ‚ûú</b></a>
</div>

---

## ü´∂ Support
To get support, please visit our **[GitHub issues page](https://github.com/thingsboard/tbmq/issues)** and check the [TBMQ FAQ](https://thingsboard.io/docs/mqtt-broker/faq/).

---

## üìÑ Licenses
This project is released under **[Apache 2.0 License](./LICENSE)**.


